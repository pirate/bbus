---
title: NATSEventBridge
description: Forward events over NATS subjects.
---

`NATSEventBridge` publishes events to a NATS subject and subscribes to the same subject for inbound forwarding.

## Optional dependencies

<Tabs>
<Tab title="Python">

Install the NATS extra (recommended):

```bash
pip install "bubus[nats]"
```

Equivalent direct dependency install:

```bash
pip install nats-py
```

</Tab>
<Tab title="TypeScript">

Install the NATS client package:

```bash
npm install bubus nats
```

This bridge is Node.js-only.

</Tab>
</Tabs>

## Constructor params

- `server`: NATS server URL (for example `nats://localhost:4222`)
- `subject`: subject name used for publish/subscribe
- `name`: optional bridge label

<Tabs>
<Tab title="Python">

```python
from bubus import NATSEventBridge

bridge = NATSEventBridge(
    'nats://localhost:4222',
    'bubus_events',
    name='NatsBridge',
)
```

</Tab>
<Tab title="TypeScript">

```ts
import { NATSEventBridge } from 'bubus'

const bridge = new NATSEventBridge(
  'nats://localhost:4222',
  'bubus_events',
  'NatsBridge'
)
```

</Tab>
</Tabs>

## Setup with a bus

<Tabs>
<Tab title="Python">

```python
from bubus import EventBus, NATSEventBridge

bus = EventBus('AppBus')
bridge = NATSEventBridge('nats://localhost:4222', 'bubus_events')

bus.on('*', bridge.emit)
bridge.on('*', bus.emit)
```

</Tab>
<Tab title="TypeScript">

```ts
import { EventBus, NATSEventBridge } from 'bubus'

const bus = new EventBus('AppBus')
const bridge = new NATSEventBridge('nats://localhost:4222', 'bubus_events')

bus.on('*', bridge.emit)
bridge.on('*', bus.emit)
```

</Tab>
</Tabs>

## Behavior

- `emit(...)` publishes serialized event JSON bytes to the configured subject.
- `on(...)` registers inbound handlers and auto-starts subscription.
- Inbound messages are decoded, reset, and re-emitted on the internal bus.
- `close()` drains/closes NATS connections and stops the internal bus.
- Runtime requirements: Python needs `nats-py`, TypeScript needs `nats` and Node.js.
